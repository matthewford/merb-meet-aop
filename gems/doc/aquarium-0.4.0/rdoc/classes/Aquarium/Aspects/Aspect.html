<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Aquarium::Aspects::Aspect</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Aquarium::Aspects::Aspect</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/aquarium/aspects/aspect_rb.html">
                lib/aquarium/aspects/aspect.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="../../Object.html">
                Object
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h2><a href="Aspect.html">Aspect</a></h2>
<p>
<a href="../Aspects.html">Aspects</a> &quot;advise&quot; one or more method
invocations for one or more types or objects (including class methods on
types). The corresponding advice is a Proc that is invoked either before
the join point, after it returns, after it raises an exception, after
either event, or around the join point, meaning the advice runs and it
decides when and if to invoke the advised method. (Hence, around advice can
run code before and after the join point call and it can &quot;veto&quot;
the actual join point call).
</p>
<p>
See also Aquarium::Aspects::DSL::AspectDsl for more information.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000118">==</a>&nbsp;&nbsp;
      <a href="#M000134">add_advice_framework</a>&nbsp;&nbsp;
      <a href="#M000130">add_advice_to_chain</a>&nbsp;&nbsp;
      <a href="#M000145">advice_chain_exists?</a>&nbsp;&nbsp;
      <a href="#M000132">advice_chain_inspect</a>&nbsp;&nbsp;
      <a href="#M000159">advice_kinds_given</a>&nbsp;&nbsp;
      <a href="#M000160">advice_kinds_given?</a>&nbsp;&nbsp;
      <a href="#M000127">advise_join_points</a>&nbsp;&nbsp;
      <a href="#M000139">alias_original_method_text</a>&nbsp;&nbsp;
      <a href="#M000112">all_allowed_option_symbols</a>&nbsp;&nbsp;
      <a href="#M000152">aspect_method_prefix</a>&nbsp;&nbsp;
      <a href="#M000162">bad_options</a>&nbsp;&nbsp;
      <a href="#M000121">calculate_excluded_types</a>&nbsp;&nbsp;
      <a href="#M000135">def_eigenclass_method_text</a>&nbsp;&nbsp;
      <a href="#M000122">determine_advice</a>&nbsp;&nbsp;
      <a href="#M000155">determine_type_or_object</a>&nbsp;&nbsp;
      <a href="#M000117">eql?</a>&nbsp;&nbsp;
      <a href="#M000147">get_advice_chain</a>&nbsp;&nbsp;
      <a href="#M000131">get_jps</a>&nbsp;&nbsp;
      <a href="#M000123">init_pointcuts</a>&nbsp;&nbsp;
      <a href="#M000120">init_type_specific_specification</a>&nbsp;&nbsp;
      <a href="#M000115">inspect</a>&nbsp;&nbsp;
      <a href="#M000128">interesting_join_points</a>&nbsp;&nbsp;
      <a href="#M000137">is_type_join_point?</a>&nbsp;&nbsp;
      <a href="#M000129">join_point_for_aspect_implementation_method?</a>&nbsp;&nbsp;
      <a href="#M000110">join_points_matched</a>&nbsp;&nbsp;
      <a href="#M000111">join_points_not_matched</a>&nbsp;&nbsp;
      <a href="#M000150">make_advice_chain_attr_sym</a>&nbsp;&nbsp;
      <a href="#M000151">make_saved_method_name</a>&nbsp;&nbsp;
      <a href="#M000156">make_type_or_object_key</a>&nbsp;&nbsp;
      <a href="#M000133">need_advice_framework?</a>&nbsp;&nbsp;
      <a href="#M000109">new</a>&nbsp;&nbsp;
      <a href="#M000149">private_method_defined?</a>&nbsp;&nbsp;
      <a href="#M000142">prune_nodes_in_advice_chain_for</a>&nbsp;&nbsp;
      <a href="#M000119">rationalize</a>&nbsp;&nbsp;
      <a href="#M000148">remove_advice_chain</a>&nbsp;&nbsp;
      <a href="#M000141">remove_advice_for_aspect_at</a>&nbsp;&nbsp;
      <a href="#M000143">remove_advice_framework_for</a>&nbsp;&nbsp;
      <a href="#M000126">remove_excluded_join_points_and_empty_pointcuts</a>&nbsp;&nbsp;
      <a href="#M000144">restore_original_method_text</a>&nbsp;&nbsp;
      <a href="#M000146">set_advice_chain</a>&nbsp;&nbsp;
      <a href="#M000125">should_warn_if_no_matching_join_points</a>&nbsp;&nbsp;
      <a href="#M000154">some_type_option_given?</a>&nbsp;&nbsp;
      <a href="#M000153">some_type_or_pc_option_given?</a>&nbsp;&nbsp;
      <a href="#M000157">specified_advice_kinds</a>&nbsp;&nbsp;
      <a href="#M000116">to_s</a>&nbsp;&nbsp;
      <a href="#M000138">type_to_advise_for</a>&nbsp;&nbsp;
      <a href="#M000113">unadvise</a>&nbsp;&nbsp;
      <a href="#M000114">unadvise_join_points</a>&nbsp;&nbsp;
      <a href="#M000140">unalias_original_method_text</a>&nbsp;&nbsp;
      <a href="#M000136">undef_eigenclass_method_text</a>&nbsp;&nbsp;
      <a href="#M000161">use_first_nonadvice_symbol_as_method</a>&nbsp;&nbsp;
      <a href="#M000158">validate_specification</a>&nbsp;&nbsp;
      <a href="#M000124">warn_if_no_join_points_matched</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="Advice.html">Advice</a></span>
        <span class="include-name"><a href="ExclusionHandler.html">ExclusionHandler</a></span>
        <span class="include-name"><a href="DefaultObjectsHandler.html">DefaultObjectsHandler</a></span>
        <span class="include-name"><a href="../Aspects.html">Aquarium::Aspects</a></span>
        <span class="include-name"><a href="../Utils/ArrayUtils.html">Aquarium::Utils::ArrayUtils</a></span>
        <span class="include-name"><a href="../Utils/HashUtils.html">Aquarium::Utils::HashUtils</a></span>
        <span class="include-name"><a href="../Utils/HtmlEscaper.html">Aquarium::Utils::HtmlEscaper</a></span>
        <span class="include-name"><a href="../Utils/OptionsUtils.html">Aquarium::Utils::OptionsUtils</a></span>
      </div>
    </div>

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">CANONICAL_OPTIONS</td>
          <td>=</td>
          <td class="context-item-value">Pointcut::CANONICAL_OPTIONS.merge({         &quot;advice&quot;            =&gt; %w[action do_action use_advice advise_with invoke call],         &quot;pointcuts&quot;         =&gt; %w[pointcut within_pointcuts within_pointcut on_pointcuts on_pointcut],         &quot;exclude_pointcuts&quot; =&gt; %w[exclude_pointcut exclude_on_pointcut exclude_on_pointcuts exclude_within_pointcut exclude_within_pointcuts],         &quot;ignore_no_matching_join_points&quot; =&gt; %[ignore_no_jps]</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">ALL_ALLOWED_OPTIONS</td>
          <td>=</td>
          <td class="context-item-value">CANONICAL_OPTIONS.keys.inject([]) {|ary,i| ary &lt;&lt; i &lt;&lt; CANONICAL_OPTIONS[i]}.flatten +         Pointcut::ATTRIBUTE_OPTIONS</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">ALL_ALLOWED_OPTION_SYMBOLS</td>
          <td>=</td>
          <td class="context-item-value">ALL_ALLOWED_OPTIONS.map {|o| o.intern} + Advice::kinds</td>
        </tr>
        </table>
      </div>
    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">advice</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">pointcuts</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">specification</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000109" class="method-detail">
        <a name="M000109"></a>

        <div class="method-heading">
          <a href="#M000109" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(*options, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
<a href="Aspect.html#M000109">Aspect.new</a> (:around | :before | :after |
:after_returning | :after_raising ) # (:pointcuts =&gt; [&#8230;]), | #
((:types =&gt; [&#8230;] | :types_and_ancestors =&gt; [&#8230;] |
:types_and_descendents =&gt; [&#8230;] # :objects =&gt; [&#8230;]),
</p>
<pre>
    :methods =&gt; [], :method_options =&gt; [...],        #     :attributes =&gt; [...], :attribute_options[...]),        #    (:advice = advice | do |join_point, obj, *args| ...; end)
</pre>
<p>
where the parameters often have many synonyms (mostly to support a
&quot;humane interface&quot;) and they are interpreted as followed:
</p>
<table>
<tr><td valign="top"><tt>:around</tt>:</td><td>Invoke the specified advice &quot;around&quot; the join points. It is up to
the advice itself to call <tt>join_point.proceed</tt> (where
<tt>join_point</tt> is the first option passed to the advice) if it wants
the advised method to actually execute.

</td></tr>
<tr><td valign="top"><tt>:before</tt>:</td><td>Invoke the specified advice before the join point.

</td></tr>
<tr><td valign="top"><tt>:after</tt>:</td><td>Invoke the specified advice after the join point either returns
successfully or raises an exception.

</td></tr>
<tr><td valign="top"><tt>:after_returning</tt>:</td><td>Invoke the specified advice after the join point returns successfully.

</td></tr>
<tr><td valign="top"><tt>:after_raising [=&gt; exception || [exception_list]]</tt>:</td><td>Invoke the specified advice after the join point raises one of the
specified exceptions. If no exceptions are specified, the advice is invoked
after any exception is raised.

</td></tr>
</table>
<p>
<tt>:advice =&gt; proc</tt>:: <tt>:action =&gt; proc</tt>:: <tt>:do_action
=&gt; proc</tt>:: <tt>:use_advice =&gt; proc</tt>:: <tt>:advise_with =&gt;
proc</tt>:: <tt>:invoke =&gt; proc</tt>::
</p>
<table>
<tr><td valign="top"><tt>:call =&gt; proc</tt>:</td><td>The specified advice to be invoked. Only one advice may be specified. If a
block is specified, it is used instead.

</td></tr>
</table>
<p>
<tt>:pointcuts =&gt; pointcut || [pointcut_list]</tt>:: <tt>:pointcut =&gt;
pointcut || [pointcut_list]</tt>:: <tt>:within_pointcut =&gt; pointcut ||
[pointcut_list]</tt>::
</p>
<table>
<tr><td valign="top"><tt>:within_pointcuts =&gt; pointcut || [pointcut_list]</tt>:</td><td>One or an array of <a href="Pointcut.html">Pointcut</a> or <a
href="JoinPoint.html">JoinPoint</a> objects. Mutually-exclusive with the
:types, :objects, :methods, :attributes, :method_options, and
:attribute_options parameters.

</td></tr>
</table>
<p>
<tt>:ignore_no_matching_join_points =&gt; true | false</tt>
</p>
<table>
<tr><td valign="top"><tt>ignore_no_jps =&gt; true | false</tt>:</td><td>Do not issue a warning if no join points are actually matched by the
aspect. By default, the value is false, meaning that a WARN-level message
will be written to the log. It is usually very helpful to be warned when no
matches occurred, for diagnostic purposes!

</td></tr>
</table>
<p>
<a href="Aspect.html#M000109">Aspect.new</a> also accepts all the same
options that <a href="Pointcut.html">Pointcut</a> accepts, including the
synonyms for :types, :methods, etc. It also accepts the
&quot;universal&quot; options documented in OptionsUtils.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000109-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000109-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 116</span>
116:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span> <span class="ruby-operator">*</span><span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
117:         <span class="ruby-ivar">@first_option_that_was_method</span> = []
118:         <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">rationalize</span> <span class="ruby-identifier">options</span>
119:         <span class="ruby-identifier">init_specification</span> <span class="ruby-identifier">opts</span>, <span class="ruby-constant">CANONICAL_OPTIONS</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
120:         <span class="ruby-identifier">init_pointcuts</span>
121:         <span class="ruby-identifier">validate_specification</span>
122:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">noop</span>
123:         <span class="ruby-identifier">advise_join_points</span>
124:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Protected Class methods</h3>

      <div id="method-M000145" class="method-detail">
        <a name="M000145"></a>

        <div class="method-heading">
          <a href="#M000145" class="method-signature">
          <span class="method-name">advice_chain_exists?</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
TODO optimize calls to these *_advice_chain methods from other private
methods.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000145-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000145-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 421</span>
421:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">advice_chain_exists?</span> <span class="ruby-identifier">join_point</span>
422:         <span class="ruby-identifier">advice_chain_attr_sym</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">make_advice_chain_attr_sym</span> <span class="ruby-identifier">join_point</span>
423:         <span class="ruby-identifier">type_to_advise_for</span>(<span class="ruby-identifier">join_point</span>).<span class="ruby-identifier">class_variable_defined?</span> <span class="ruby-identifier">advice_chain_attr_sym</span>
424:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000132" class="method-detail">
        <a name="M000132"></a>

        <div class="method-heading">
          <a href="#M000132" class="method-signature">
          <span class="method-name">advice_chain_inspect</span><span class="method-args">(advice_chain)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Useful for debugging&#8230;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000132-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000132-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 291</span>
291:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">advice_chain_inspect</span> <span class="ruby-identifier">advice_chain</span>
292:         <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;[nil]&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">advice_chain</span>.<span class="ruby-identifier">nil?</span>
293:         <span class="ruby-value str">&quot;&lt;br/&gt;&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">advice_chain</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ac</span><span class="ruby-operator">|</span>
294:           <span class="ruby-node">&quot;#{ac.class.name}:#{ac.object_id}: join_point = #{ac.static_join_point}: aspect = #{ac.aspect.object_id}, next_node = #{advice_chain_inspect ac.next_node}&quot;</span>
295:         <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\&lt;/</span>,<span class="ruby-value str">&quot;&amp;lt;&quot;</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\&gt;/</span>,<span class="ruby-value str">&quot;&amp;gt;&quot;</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;&lt;br/&gt;&quot;</span>
296:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000152" class="method-detail">
        <a name="M000152"></a>

        <div class="method-heading">
          <a href="#M000152" class="method-signature">
          <span class="method-name">aspect_method_prefix</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000152-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000152-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 459</span>
459:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">aspect_method_prefix</span>
460:         <span class="ruby-value str">&quot;_aspect_&quot;</span>
461:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000155" class="method-detail">
        <a name="M000155"></a>

        <div class="method-heading">
          <a href="#M000155" class="method-signature">
          <span class="method-name">determine_type_or_object</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000155-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000155-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 471</span>
471:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">determine_type_or_object</span> <span class="ruby-identifier">join_point</span>
472:         <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">type_or_object</span>
473:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000147" class="method-detail">
        <a name="M000147"></a>

        <div class="method-heading">
          <a href="#M000147" class="method-signature">
          <span class="method-name">get_advice_chain</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000147-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000147-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 431</span>
431:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">get_advice_chain</span> <span class="ruby-identifier">join_point</span>
432:         <span class="ruby-identifier">advice_chain_attr_sym</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">make_advice_chain_attr_sym</span> <span class="ruby-identifier">join_point</span>
433:         <span class="ruby-identifier">type_to_advise_for</span>(<span class="ruby-identifier">join_point</span>).<span class="ruby-identifier">send</span> <span class="ruby-identifier">:class_variable_get</span>, <span class="ruby-identifier">advice_chain_attr_sym</span>
434:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000137" class="method-detail">
        <a name="M000137"></a>

        <div class="method-heading">
          <a href="#M000137" class="method-signature">
          <span class="method-name">is_type_join_point?</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000137-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000137-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 339</span>
339:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">is_type_join_point?</span> <span class="ruby-identifier">join_point</span>
340:         <span class="ruby-constant">Aquarium</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">TypeUtils</span>.<span class="ruby-identifier">is_type?</span> <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">type_or_object</span>
341:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000150" class="method-detail">
        <a name="M000150"></a>

        <div class="method-heading">
          <a href="#M000150" class="method-signature">
          <span class="method-name">make_advice_chain_attr_sym</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000150-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000150-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 446</span>
446:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">make_advice_chain_attr_sym</span> <span class="ruby-identifier">join_point</span>
447:         <span class="ruby-identifier">class_or_object_prefix</span> = <span class="ruby-identifier">is_type_join_point?</span>(<span class="ruby-identifier">join_point</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;class_&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;&quot;</span>
448:         <span class="ruby-identifier">type_or_object_key</span> = <span class="ruby-identifier">make_type_or_object_key</span> <span class="ruby-identifier">join_point</span>
449:         <span class="ruby-identifier">valid_name</span> = <span class="ruby-constant">Aquarium</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">NameUtils</span>.<span class="ruby-identifier">make_valid_attr_name_from_method_name</span> <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">method_name</span>
450:         <span class="ruby-node">&quot;@@#{Aspect.aspect_method_prefix}#{class_or_object_prefix}advice_chain_#{type_or_object_key}_#{valid_name}&quot;</span>.<span class="ruby-identifier">intern</span>
451:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000151" class="method-detail">
        <a name="M000151"></a>

        <div class="method-heading">
          <a href="#M000151" class="method-signature">
          <span class="method-name">make_saved_method_name</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000151-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000151-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 453</span>
453:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">make_saved_method_name</span> <span class="ruby-identifier">join_point</span>
454:         <span class="ruby-identifier">type_or_object_key</span> = <span class="ruby-identifier">make_type_or_object_key</span> <span class="ruby-identifier">join_point</span>
455:         <span class="ruby-identifier">valid_name</span> = <span class="ruby-constant">Aquarium</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">NameUtils</span>.<span class="ruby-identifier">make_valid_attr_name_from_method_name</span> <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">method_name</span>
456:         <span class="ruby-node">&quot;#{Aspect.aspect_method_prefix}saved_#{type_or_object_key}_#{valid_name}&quot;</span>
457:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000156" class="method-detail">
        <a name="M000156"></a>

        <div class="method-heading">
          <a href="#M000156" class="method-signature">
          <span class="method-name">make_type_or_object_key</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000156-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000156-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 475</span>
475:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">make_type_or_object_key</span> <span class="ruby-identifier">join_point</span>
476:         <span class="ruby-constant">Aquarium</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">NameUtils</span>.<span class="ruby-identifier">make_type_or_object_key</span> <span class="ruby-identifier">determine_type_or_object</span>(<span class="ruby-identifier">join_point</span>)
477:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000148" class="method-detail">
        <a name="M000148"></a>

        <div class="method-heading">
          <a href="#M000148" class="method-signature">
          <span class="method-name">remove_advice_chain</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000148-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000148-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 436</span>
436:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">remove_advice_chain</span> <span class="ruby-identifier">join_point</span>
437:         <span class="ruby-identifier">advice_chain_attr_sym</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">make_advice_chain_attr_sym</span> <span class="ruby-identifier">join_point</span>
438:         <span class="ruby-identifier">type_to_advise_for</span>(<span class="ruby-identifier">join_point</span>).<span class="ruby-identifier">send</span> <span class="ruby-identifier">:remove_class_variable</span>, <span class="ruby-identifier">advice_chain_attr_sym</span>
439:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000146" class="method-detail">
        <a name="M000146"></a>

        <div class="method-heading">
          <a href="#M000146" class="method-signature">
          <span class="method-name">set_advice_chain</span><span class="method-args">(join_point, advice_chain)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000146-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000146-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 426</span>
426:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">set_advice_chain</span> <span class="ruby-identifier">join_point</span>, <span class="ruby-identifier">advice_chain</span>
427:         <span class="ruby-identifier">advice_chain_attr_sym</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">make_advice_chain_attr_sym</span> <span class="ruby-identifier">join_point</span>
428:         <span class="ruby-identifier">type_to_advise_for</span>(<span class="ruby-identifier">join_point</span>).<span class="ruby-identifier">send</span> <span class="ruby-identifier">:class_variable_set</span>, <span class="ruby-identifier">advice_chain_attr_sym</span>, <span class="ruby-identifier">advice_chain</span>
429:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000138" class="method-detail">
        <a name="M000138"></a>

        <div class="method-heading">
          <a href="#M000138" class="method-signature">
          <span class="method-name">type_to_advise_for</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000138-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000138-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 343</span>
343:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">type_to_advise_for</span> <span class="ruby-identifier">join_point</span>
344:         <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">target_type</span> <span class="ruby-value">? </span><span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">target_type</span> <span class="ruby-operator">:</span> (<span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">target_object</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>)
345:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000118" class="method-detail">
        <a name="M000118"></a>

        <div class="method-heading">
          <span class="method-name">==</span><span class="method-args">(other)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for eql?
</p>
        </div>
      </div>

      <div id="method-M000112" class="method-detail">
        <a name="M000112"></a>

        <div class="method-heading">
          <a href="#M000112" class="method-signature">
          <span class="method-name">all_allowed_option_symbols</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000112-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000112-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 134</span>
134:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">all_allowed_option_symbols</span>
135:         <span class="ruby-constant">ALL_ALLOWED_OPTION_SYMBOLS</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@first_option_that_was_method</span>
136:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000117" class="method-detail">
        <a name="M000117"></a>

        <div class="method-heading">
          <a href="#M000117" class="method-signature">
          <span class="method-name">eql?</span><span class="method-args">(other)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
We have to ignore advice in the comparison. As recently discussed in
ruby-users, there are very few situations. where Proc#eql? returns true.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000117-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000117-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 157</span>
157:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span> <span class="ruby-identifier">other</span>
158:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">object_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">object_id</span> <span class="ruby-operator">||</span>
159:           (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">other</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">specification</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">specification</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">pointcuts</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">pointcuts</span>)
160:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000115" class="method-detail">
        <a name="M000115"></a>

        <div class="method-heading">
          <a href="#M000115" class="method-signature">
          <span class="method-name">inspect</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000115-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000115-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 149</span>
149:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
150:         <span class="ruby-node">&quot;Aspect: {specification: #{specification.inspect}, pointcuts: #{pointcuts.inspect}, advice: #{advice.inspect}}&quot;</span>
151:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000110" class="method-detail">
        <a name="M000110"></a>

        <div class="method-heading">
          <a href="#M000110" class="method-signature">
          <span class="method-name">join_points_matched</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000110-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000110-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 126</span>
126:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join_points_matched</span> 
127:         <span class="ruby-identifier">get_jps</span> <span class="ruby-identifier">:join_points_matched</span>
128:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000111" class="method-detail">
        <a name="M000111"></a>

        <div class="method-heading">
          <a href="#M000111" class="method-signature">
          <span class="method-name">join_points_not_matched</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000111-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000111-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 130</span>
130:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join_points_not_matched</span>
131:         <span class="ruby-identifier">get_jps</span> <span class="ruby-identifier">:join_points_not_matched</span>
132:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000116" class="method-detail">
        <a name="M000116"></a>

        <div class="method-heading">
          <span class="method-name">to_s</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Aspect.html#M000115">inspect</a>
</p>
        </div>
      </div>

      <div id="method-M000113" class="method-detail">
        <a name="M000113"></a>

        <div class="method-heading">
          <a href="#M000113" class="method-signature">
          <span class="method-name">unadvise</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000113-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000113-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 138</span>
138:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unadvise</span>
139:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">noop</span>
140:         <span class="ruby-ivar">@pointcuts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pointcut</span><span class="ruby-operator">|</span>
141:           <span class="ruby-identifier">interesting_join_points</span>(<span class="ruby-identifier">pointcut</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">join_point</span><span class="ruby-operator">|</span>
142:             <span class="ruby-identifier">remove_advice_for_aspect_at</span> <span class="ruby-identifier">join_point</span>
143:           <span class="ruby-keyword kw">end</span>
144:         <span class="ruby-keyword kw">end</span>
145:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000114" class="method-detail">
        <a name="M000114"></a>

        <div class="method-heading">
          <span class="method-name">unadvise_join_points</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Aspect.html#M000113">unadvise</a>
</p>
        </div>
      </div>

      <h3 class="section-bar">Protected Instance methods</h3>

      <div id="method-M000134" class="method-detail">
        <a name="M000134"></a>

        <div class="method-heading">
          <a href="#M000134" class="method-signature">
          <span class="method-name">add_advice_framework</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000134-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000134-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 303</span>
303:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_advice_framework</span> <span class="ruby-identifier">join_point</span>
304:         <span class="ruby-identifier">alias_method_name</span> = (<span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">make_saved_method_name</span> <span class="ruby-identifier">join_point</span>).<span class="ruby-identifier">intern</span>
305:         <span class="ruby-identifier">type_to_advise</span> = <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">type_to_advise_for</span> <span class="ruby-identifier">join_point</span>
306:         <span class="ruby-comment cmt"># Note: Must set advice chain, a class variable on the type we're advising, FIRST. </span>
307:         <span class="ruby-comment cmt"># Otherwise the class_eval that follows will assume the @@ advice chain belongs to Aspect!</span>
308:         <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">set_advice_chain</span> <span class="ruby-identifier">join_point</span>, <span class="ruby-constant">AdviceChainNodeFactory</span>.<span class="ruby-identifier">make_node</span>(
309:           <span class="ruby-identifier">:aspect</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,  <span class="ruby-comment cmt"># Belongs to all aspects that might advise this join point!</span>
310:           <span class="ruby-identifier">:advice_kind</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:none</span>, 
311:           <span class="ruby-identifier">:alias_method_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">alias_method_name</span>,
312:           <span class="ruby-identifier">:static_join_point</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">join_point</span>)
313:         <span class="ruby-identifier">type_being_advised_text</span> = <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">instance_method?</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;self.class&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;self&quot;</span>
314:         <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">is_type_join_point?</span>(<span class="ruby-identifier">join_point</span>) 
315:           <span class="ruby-identifier">type_being_advised_text</span> = <span class="ruby-value str">&quot;(class &lt;&lt; self; self; end)&quot;</span>
316:         <span class="ruby-keyword kw">end</span>
317:         <span class="ruby-identifier">type_to_advise2</span> = <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">instance_method?</span> <span class="ruby-value">? </span><span class="ruby-identifier">type_to_advise</span> <span class="ruby-operator">:</span> (<span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">type_to_advise</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>)
318:         <span class="ruby-identifier">type_to_advise2</span>.<span class="ruby-identifier">class_eval</span>(<span class="ruby-value str">&quot;\#{def_eigenclass_method_text join_point}\n\#{alias_original_method_text alias_method_name, join_point, type_being_advised_text}\n&quot;</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span>)
319:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000130" class="method-detail">
        <a name="M000130"></a>

        <div class="method-heading">
          <a href="#M000130" class="method-signature">
          <span class="method-name">add_advice_to_chain</span><span class="method-args">(join_point, advice_kind, advice)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000130-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000130-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 270</span>
270:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_advice_to_chain</span> <span class="ruby-identifier">join_point</span>, <span class="ruby-identifier">advice_kind</span>, <span class="ruby-identifier">advice</span>
271:         <span class="ruby-identifier">start_of_advice_chain</span> = <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">get_advice_chain</span> <span class="ruby-identifier">join_point</span>
272:         <span class="ruby-identifier">options</span> = <span class="ruby-ivar">@specification</span>.<span class="ruby-identifier">merge</span>({
273:           <span class="ruby-identifier">:aspect</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>,
274:           <span class="ruby-identifier">:advice_kind</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">advice_kind</span>, 
275:           <span class="ruby-identifier">:advice</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">advice</span>, 
276:           <span class="ruby-identifier">:next_node</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">start_of_advice_chain</span>,
277:           <span class="ruby-identifier">:static_join_point</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">join_point</span>})
278:         <span class="ruby-comment cmt"># New node is new start of chain.</span>
279:         <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">set_advice_chain</span>(<span class="ruby-identifier">join_point</span>, <span class="ruby-constant">AdviceChainNodeFactory</span>.<span class="ruby-identifier">make_node</span>(<span class="ruby-identifier">options</span>))
280:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000159" class="method-detail">
        <a name="M000159"></a>

        <div class="method-heading">
          <a href="#M000159" class="method-signature">
          <span class="method-name">advice_kinds_given</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000159-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000159-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 510</span>
510:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">advice_kinds_given</span>
511:         <span class="ruby-constant">Advice</span>.<span class="ruby-identifier">kinds</span>.<span class="ruby-identifier">inject</span>([]) {<span class="ruby-operator">|</span><span class="ruby-identifier">ary</span>, <span class="ruby-identifier">kind</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ary</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">kind</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">kind</span>]; <span class="ruby-identifier">ary</span>}
512:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000160" class="method-detail">
        <a name="M000160"></a>

        <div class="method-heading">
          <a href="#M000160" class="method-signature">
          <span class="method-name">advice_kinds_given?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000160-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000160-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 514</span>
514:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">advice_kinds_given?</span>
515:         <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">advice_kinds_given</span>.<span class="ruby-identifier">empty?</span>
516:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000127" class="method-detail">
        <a name="M000127"></a>

        <div class="method-heading">
          <a href="#M000127" class="method-signature">
          <span class="method-name">advise_join_points</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000127-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000127-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 248</span>
248:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">advise_join_points</span>
249:         <span class="ruby-identifier">advice</span> = <span class="ruby-ivar">@advice</span>.<span class="ruby-identifier">to_proc</span>
250:         <span class="ruby-ivar">@pointcuts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pointcut</span><span class="ruby-operator">|</span>
251:           <span class="ruby-identifier">interesting_join_points</span>(<span class="ruby-identifier">pointcut</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">join_point</span><span class="ruby-operator">|</span>
252:             <span class="ruby-identifier">add_advice_framework</span>(<span class="ruby-identifier">join_point</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">need_advice_framework?</span>(<span class="ruby-identifier">join_point</span>)
253:             <span class="ruby-constant">Advice</span>.<span class="ruby-identifier">sort_by_priority_order</span>(<span class="ruby-identifier">specified_advice_kinds</span>).<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">advice_kind</span><span class="ruby-operator">|</span>
254:               <span class="ruby-identifier">add_advice_to_chain</span> <span class="ruby-identifier">join_point</span>, <span class="ruby-identifier">advice_kind</span>, <span class="ruby-identifier">advice</span>
255:             <span class="ruby-keyword kw">end</span>
256:           <span class="ruby-keyword kw">end</span>
257:         <span class="ruby-keyword kw">end</span>
258:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000139" class="method-detail">
        <a name="M000139"></a>

        <div class="method-heading">
          <a href="#M000139" class="method-signature">
          <span class="method-name">alias_original_method_text</span><span class="method-args">(alias_method_name, join_point, type_being_advised_text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000139-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000139-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 347</span>
347:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">alias_original_method_text</span> <span class="ruby-identifier">alias_method_name</span>, <span class="ruby-identifier">join_point</span>, <span class="ruby-identifier">type_being_advised_text</span>
348:         <span class="ruby-identifier">target_self</span> = <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">instance_method?</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;self&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">target_type</span>.<span class="ruby-identifier">name</span>
349:         <span class="ruby-identifier">advice_chain_attr_sym</span> = <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">make_advice_chain_attr_sym</span> <span class="ruby-identifier">join_point</span>
350:         <span class="ruby-value str">&quot;alias_method :\#{alias_method_name}, :\#{join_point.method_name}\ndef \#{join_point.method_name} *args, &amp;block_for_method\nadvice_chain = \#{type_being_advised_text}.send :class_variable_get, \&quot;\#{advice_chain_attr_sym}\&quot;\nstatic_join_point = advice_chain.static_join_point\nadvice_join_point = static_join_point.make_current_context_join_point(\n:advice_kind =&gt; :before,\n:advised_object =&gt; \#{target_self},\n:parameters =&gt; args,\n:block_for_method =&gt; block_for_method)\nadvice_chain.call advice_join_point, \#{target_self}, *args\nend\n\#{join_point.visibility.to_s} :\#{join_point.method_name}\nprivate :\#{alias_method_name}\n&quot;</span>
351:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000162" class="method-detail">
        <a name="M000162"></a>

        <div class="method-heading">
          <a href="#M000162" class="method-signature">
          <span class="method-name">bad_options</span><span class="method-args">(message)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000162-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000162-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 540</span>
540:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bad_options</span> <span class="ruby-identifier">message</span>
541:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">Aquarium</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidOptions</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Invalid options given. &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">message</span> <span class="ruby-operator">+</span> 
542:         <span class="ruby-node">&quot; (options: #{@original_options.inspect}, mapped to specification: #{@specification.inspect})&quot;</span>)
543:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000121" class="method-detail">
        <a name="M000121"></a>

        <div class="method-heading">
          <a href="#M000121" class="method-signature">
          <span class="method-name">calculate_excluded_types</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000121-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000121-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 184</span>
184:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">calculate_excluded_types</span>
185:         <span class="ruby-identifier">type_finder_options</span> = {}
186:         <span class="ruby-node">%w[types types_and_ancestors types_and_descendents]</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">opt</span><span class="ruby-operator">|</span>
187:           <span class="ruby-identifier">type_finder_options</span>[<span class="ruby-identifier">opt</span>.<span class="ruby-identifier">intern</span>] = <span class="ruby-ivar">@specification</span>[<span class="ruby-node">&quot;exclude_#{opt}&quot;</span>.<span class="ruby-identifier">intern</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@specification</span>[<span class="ruby-node">&quot;exclude_#{opt}&quot;</span>.<span class="ruby-identifier">intern</span>]
188:         <span class="ruby-keyword kw">end</span>
189:         <span class="ruby-identifier">excluded_types</span> = <span class="ruby-constant">Aquarium</span><span class="ruby-operator">::</span><span class="ruby-constant">Finders</span><span class="ruby-operator">::</span><span class="ruby-constant">TypeFinder</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">type_finder_options</span>
190:         <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">:exclude_types_calculated</span>] = <span class="ruby-identifier">excluded_types</span>.<span class="ruby-identifier">matched</span>.<span class="ruby-identifier">keys</span>
191:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000135" class="method-detail">
        <a name="M000135"></a>

        <div class="method-heading">
          <a href="#M000135" class="method-signature">
          <span class="method-name">def_eigenclass_method_text</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
When advising an instance, create an override method that gets advised
instead of the types method. Otherwise, all objects will be advised! Note:
this also solves bug 15202.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000135-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000135-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 328</span>
328:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">def_eigenclass_method_text</span> <span class="ruby-identifier">join_point</span>
329:         <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">is_type_join_point?</span>(<span class="ruby-identifier">join_point</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;def #{join_point.method_name} *args; super; end&quot;</span>
330:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000122" class="method-detail">
        <a name="M000122"></a>

        <div class="method-heading">
          <a href="#M000122" class="method-signature">
          <span class="method-name">determine_advice</span><span class="method-args">(block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000122-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000122-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 193</span>
193:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">determine_advice</span> <span class="ruby-identifier">block</span>
194:         <span class="ruby-comment cmt"># There can be only one advice; take any one in the set; options validation will raise if there is more than one.</span>
195:         <span class="ruby-identifier">block</span> <span class="ruby-operator">||</span> (<span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">:advice</span>].<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>)
196:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000131" class="method-detail">
        <a name="M000131"></a>

        <div class="method-heading">
          <a href="#M000131" class="method-signature">
          <span class="method-name">get_jps</span><span class="method-args">(which_jps)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000131-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000131-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 282</span>
282:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_jps</span> <span class="ruby-identifier">which_jps</span>
283:         <span class="ruby-identifier">jps</span> = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>
284:         <span class="ruby-ivar">@pointcuts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pointcut</span><span class="ruby-operator">|</span>
285:           <span class="ruby-identifier">jps</span> = <span class="ruby-identifier">jps</span>.<span class="ruby-identifier">union</span>(<span class="ruby-identifier">pointcut</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">which_jps</span>))
286:         <span class="ruby-keyword kw">end</span>
287:         <span class="ruby-identifier">jps</span>
288:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000123" class="method-detail">
        <a name="M000123"></a>

        <div class="method-heading">
          <a href="#M000123" class="method-signature">
          <span class="method-name">init_pointcuts</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000123-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000123-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 198</span>
198:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init_pointcuts</span>
199:         <span class="ruby-identifier">pointcuts</span> = []
200:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pointcuts_given?</span>
201:           <span class="ruby-identifier">pointcuts_given</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pointcut</span><span class="ruby-operator">|</span>
202:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pointcut</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Pointcut</span>
203:               <span class="ruby-identifier">pointcuts</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">pointcut</span> 
204:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">pointcut</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">JoinPoint</span>
205:               <span class="ruby-identifier">pointcuts</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Pointcut</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:join_point</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">pointcut</span>) 
206:             <span class="ruby-keyword kw">else</span>  <span class="ruby-comment cmt"># a hash of Pointcut.new options?</span>
207:               <span class="ruby-identifier">pointcuts</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Pointcut</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">pointcut</span>) 
208:             <span class="ruby-keyword kw">end</span>
209:           <span class="ruby-keyword kw">end</span>
210:         <span class="ruby-keyword kw">else</span>
211:           <span class="ruby-identifier">pc_options</span> = {}
212:           <span class="ruby-constant">Pointcut</span><span class="ruby-operator">::</span><span class="ruby-constant">ALL_ALLOWED_OPTION_SYMBOLS</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pc_option</span><span class="ruby-operator">|</span>
213:             <span class="ruby-identifier">pc_options</span>[<span class="ruby-identifier">pc_option</span>] = <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">pc_option</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">pc_option</span>].<span class="ruby-identifier">nil?</span>
214:           <span class="ruby-keyword kw">end</span>
215:           <span class="ruby-identifier">pointcuts</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Pointcut</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">pc_options</span>)
216:         <span class="ruby-keyword kw">end</span>
217:         <span class="ruby-ivar">@pointcuts</span> = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">remove_excluded_join_points_and_empty_pointcuts</span>(<span class="ruby-identifier">pointcuts</span>))
218:         <span class="ruby-identifier">warn_if_no_join_points_matched</span>
219:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000120" class="method-detail">
        <a name="M000120"></a>

        <div class="method-heading">
          <a href="#M000120" class="method-signature">
          <span class="method-name">init_type_specific_specification</span><span class="method-args">(original_options, options_hash, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000120-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000120-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 173</span>
173:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init_type_specific_specification</span> <span class="ruby-identifier">original_options</span>, <span class="ruby-identifier">options_hash</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
174:         <span class="ruby-constant">Advice</span>.<span class="ruby-identifier">kinds</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">kind</span><span class="ruby-operator">|</span>
175:           <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">kind</span>] = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">make_array</span>(<span class="ruby-identifier">options_hash</span>[<span class="ruby-identifier">kind</span>])) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options_hash</span>[<span class="ruby-identifier">kind</span>]
176:         <span class="ruby-keyword kw">end</span>
177:         <span class="ruby-ivar">@specification</span>.<span class="ruby-identifier">merge!</span> <span class="ruby-constant">Pointcut</span>.<span class="ruby-identifier">make_attribute_reading_writing_options</span>(<span class="ruby-identifier">options_hash</span>)
178:         <span class="ruby-identifier">use_default_objects_if_defined</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">some_type_or_pc_option_given?</span> 
179:         <span class="ruby-identifier">use_first_nonadvice_symbol_as_method</span>(<span class="ruby-identifier">original_options</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">methods_given?</span>
180:         <span class="ruby-identifier">calculate_excluded_types</span>
181:         <span class="ruby-ivar">@advice</span> = <span class="ruby-identifier">determine_advice</span> <span class="ruby-identifier">block</span>
182:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000128" class="method-detail">
        <a name="M000128"></a>

        <div class="method-heading">
          <a href="#M000128" class="method-signature">
          <span class="method-name">interesting_join_points</span><span class="method-args">(pointcut)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000128-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000128-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 260</span>
260:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">interesting_join_points</span> <span class="ruby-identifier">pointcut</span>
261:         <span class="ruby-identifier">pointcut</span>.<span class="ruby-identifier">join_points_matched</span>.<span class="ruby-identifier">reject</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">join_point</span><span class="ruby-operator">|</span> 
262:           <span class="ruby-identifier">join_point_for_aspect_implementation_method?</span> <span class="ruby-identifier">join_point</span>
263:         <span class="ruby-keyword kw">end</span>
264:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000129" class="method-detail">
        <a name="M000129"></a>

        <div class="method-heading">
          <a href="#M000129" class="method-signature">
          <span class="method-name">join_point_for_aspect_implementation_method?</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000129-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000129-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 266</span>
266:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join_point_for_aspect_implementation_method?</span> <span class="ruby-identifier">join_point</span>
267:         <span class="ruby-identifier">join_point</span>.<span class="ruby-identifier">method_name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">index</span>(<span class="ruby-node">&quot;#{Aspect.aspect_method_prefix}&quot;</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
268:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000133" class="method-detail">
        <a name="M000133"></a>

        <div class="method-heading">
          <a href="#M000133" class="method-signature">
          <span class="method-name">need_advice_framework?</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000133-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000133-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 298</span>
298:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">need_advice_framework?</span> <span class="ruby-identifier">join_point</span>
299:         <span class="ruby-identifier">alias_method_name</span> = (<span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">make_saved_method_name</span> <span class="ruby-identifier">join_point</span>).<span class="ruby-identifier">intern</span>
300:         <span class="ruby-identifier">private_method_defined?</span>(<span class="ruby-identifier">join_point</span>, <span class="ruby-identifier">alias_method_name</span>) <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
301:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000149" class="method-detail">
        <a name="M000149"></a>

        <div class="method-heading">
          <a href="#M000149" class="method-signature">
          <span class="method-name">private_method_defined?</span><span class="method-args">(join_point, alias_method_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000149-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000149-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 441</span>
441:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">private_method_defined?</span> <span class="ruby-identifier">join_point</span>, <span class="ruby-identifier">alias_method_name</span>
442:         <span class="ruby-identifier">type_to_advise</span> = <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">type_to_advise_for</span> <span class="ruby-identifier">join_point</span>
443:         <span class="ruby-identifier">type_to_advise</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:private_instance_methods</span>).<span class="ruby-identifier">include?</span> <span class="ruby-identifier">alias_method_name</span>.<span class="ruby-identifier">to_s</span>
444:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000142" class="method-detail">
        <a name="M000142"></a>

        <div class="method-heading">
          <a href="#M000142" class="method-signature">
          <span class="method-name">prune_nodes_in_advice_chain_for</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000142-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000142-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 384</span>
384:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prune_nodes_in_advice_chain_for</span> <span class="ruby-identifier">join_point</span>
385:         <span class="ruby-identifier">advice_chain</span> = <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">get_advice_chain</span> <span class="ruby-identifier">join_point</span>
386:         <span class="ruby-comment cmt"># Use equal? for the aspects to compare object id only,</span>
387:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">advice_chain</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">advice_chain</span>.<span class="ruby-identifier">aspect</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-keyword kw">self</span>)
388:           <span class="ruby-identifier">advice_chain</span> = <span class="ruby-identifier">advice_chain</span>.<span class="ruby-identifier">next_node</span> 
389:         <span class="ruby-keyword kw">end</span>
390:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">advice_chain</span>
391:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
392:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_node</span>.<span class="ruby-identifier">aspect</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-keyword kw">self</span>)
393:             <span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_node</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_node</span>.<span class="ruby-identifier">next_node</span>
394:           <span class="ruby-keyword kw">end</span>
395:           <span class="ruby-identifier">node</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_node</span> 
396:         <span class="ruby-keyword kw">end</span>
397:         <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">set_advice_chain</span> <span class="ruby-identifier">join_point</span>, <span class="ruby-identifier">advice_chain</span>
398:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000119" class="method-detail">
        <a name="M000119"></a>

        <div class="method-heading">
          <a href="#M000119" class="method-signature">
          <span class="method-name">rationalize</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000119-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000119-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 166</span>
166:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rationalize</span> <span class="ruby-identifier">options</span> 
167:         <span class="ruby-keyword kw">return</span> {} <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">empty?</span>
168:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">options</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
169:         <span class="ruby-comment cmt"># remove [] wrapping if we're wrapping a single hash element</span>
170:         <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>)) <span class="ruby-operator">?</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">options</span>  
171:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000141" class="method-detail">
        <a name="M000141"></a>

        <div class="method-heading">
          <a href="#M000141" class="method-signature">
          <span class="method-name">remove_advice_for_aspect_at</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000141-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000141-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 377</span>
377:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_advice_for_aspect_at</span> <span class="ruby-identifier">join_point</span>
378:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">advice_chain_exists?</span> <span class="ruby-identifier">join_point</span>
379:         <span class="ruby-identifier">prune_nodes_in_advice_chain_for</span> <span class="ruby-identifier">join_point</span>
380:         <span class="ruby-identifier">advice_chain</span> = <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">get_advice_chain</span> <span class="ruby-identifier">join_point</span>
381:         <span class="ruby-identifier">remove_advice_framework_for</span>(<span class="ruby-identifier">join_point</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">advice_chain</span>.<span class="ruby-identifier">empty?</span>
382:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000143" class="method-detail">
        <a name="M000143"></a>

        <div class="method-heading">
          <a href="#M000143" class="method-signature">
          <span class="method-name">remove_advice_framework_for</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000143-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000143-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 400</span>
400:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_advice_framework_for</span> <span class="ruby-identifier">join_point</span>
401:         <span class="ruby-identifier">type_to_advise</span> = <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">type_to_advise_for</span> <span class="ruby-identifier">join_point</span>
402:         <span class="ruby-identifier">type_to_advise</span>.<span class="ruby-identifier">class_eval</span>(<span class="ruby-value str">&quot;\#{restore_original_method_text join_point}\n&quot;</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span>)
403:         <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">remove_advice_chain</span> <span class="ruby-identifier">join_point</span>
404:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000126" class="method-detail">
        <a name="M000126"></a>

        <div class="method-heading">
          <a href="#M000126" class="method-signature">
          <span class="method-name">remove_excluded_join_points_and_empty_pointcuts</span><span class="method-args">(pointcuts)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000126-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000126-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 239</span>
239:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_excluded_join_points_and_empty_pointcuts</span> <span class="ruby-identifier">pointcuts</span>
240:         <span class="ruby-identifier">pointcuts</span>.<span class="ruby-identifier">reject</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pc</span><span class="ruby-operator">|</span>
241:           <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">join_points_matched</span>.<span class="ruby-identifier">delete_if</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">jp</span><span class="ruby-operator">|</span>
242:             <span class="ruby-identifier">join_point_excluded?</span> <span class="ruby-identifier">jp</span>
243:           <span class="ruby-keyword kw">end</span>
244:           <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">empty?</span>
245:         <span class="ruby-keyword kw">end</span>
246:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000144" class="method-detail">
        <a name="M000144"></a>

        <div class="method-heading">
          <a href="#M000144" class="method-signature">
          <span class="method-name">restore_original_method_text</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000144-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000144-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 409</span>
409:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">restore_original_method_text</span> <span class="ruby-identifier">join_point</span>
410:         <span class="ruby-identifier">alias_method_name</span> = (<span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">make_saved_method_name</span> <span class="ruby-identifier">join_point</span>).<span class="ruby-identifier">intern</span>
411:         <span class="ruby-value str">&quot;\#{join_point.instance_method? ? \&quot;\&quot; : \&quot;class &lt;&lt; self\&quot;}\n\#{unalias_original_method_text alias_method_name, join_point}\n\#{undef_eigenclass_method_text join_point}\n\#{join_point.instance_method? ? \&quot;\&quot; : \&quot;end\&quot;}\n&quot;</span>
412:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000125" class="method-detail">
        <a name="M000125"></a>

        <div class="method-heading">
          <a href="#M000125" class="method-signature">
          <span class="method-name">should_warn_if_no_matching_join_points</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000125-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000125-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 233</span>
233:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_warn_if_no_matching_join_points</span>
234:         <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">:ignore_no_matching_join_points</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> 
235:         <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">:ignore_no_matching_join_points</span>].<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">or</span> 
236:         <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">:ignore_no_matching_join_points</span>].<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
237:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000154" class="method-detail">
        <a name="M000154"></a>

        <div class="method-heading">
          <a href="#M000154" class="method-signature">
          <span class="method-name">some_type_option_given?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000154-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000154-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 467</span>
467:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">some_type_option_given?</span>
468:         <span class="ruby-identifier">types_given?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">types_and_ancestors_given?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">types_and_descendents_given?</span> 
469:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000153" class="method-detail">
        <a name="M000153"></a>

        <div class="method-heading">
          <a href="#M000153" class="method-signature">
          <span class="method-name">some_type_or_pc_option_given?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000153-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000153-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 463</span>
463:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">some_type_or_pc_option_given?</span>
464:         <span class="ruby-identifier">pointcuts_given?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">some_type_option_given?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">objects_given?</span> 
465:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000157" class="method-detail">
        <a name="M000157"></a>

        <div class="method-heading">
          <a href="#M000157" class="method-signature">
          <span class="method-name">specified_advice_kinds</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000157-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000157-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 479</span>
479:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">specified_advice_kinds</span>
480:         <span class="ruby-constant">Advice</span>.<span class="ruby-identifier">kinds</span> <span class="ruby-operator">&amp;</span> <span class="ruby-ivar">@specification</span>.<span class="ruby-identifier">keys</span>
481:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000140" class="method-detail">
        <a name="M000140"></a>

        <div class="method-heading">
          <a href="#M000140" class="method-signature">
          <span class="method-name">unalias_original_method_text</span><span class="method-args">(alias_method_name, join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000140-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000140-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 368</span>
368:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unalias_original_method_text</span> <span class="ruby-identifier">alias_method_name</span>, <span class="ruby-identifier">join_point</span>
369:         <span class="ruby-value str">&quot;alias_method :\#{join_point.method_name}, :\#{alias_method_name}\n\#{join_point.visibility.to_s} :\#{join_point.method_name}\nundef_method :\#{alias_method_name}\n&quot;</span>
370:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000136" class="method-detail">
        <a name="M000136"></a>

        <div class="method-heading">
          <a href="#M000136" class="method-signature">
          <span class="method-name">undef_eigenclass_method_text</span><span class="method-args">(join_point)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
For the temporary eigenclass method wrapper, alias it to a temporary name
then undefine it, so it completely disappears. Next, remove_method on the
method name so the object starts responding again to the original
definition.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000136-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000136-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 335</span>
335:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">undef_eigenclass_method_text</span> <span class="ruby-identifier">join_point</span>
336:         <span class="ruby-constant">Aspect</span>.<span class="ruby-identifier">is_type_join_point?</span>(<span class="ruby-identifier">join_point</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;remove_method :#{join_point.method_name}&quot;</span>
337:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000161" class="method-detail">
        <a name="M000161"></a>

        <div class="method-heading">
          <a href="#M000161" class="method-signature">
          <span class="method-name">use_first_nonadvice_symbol_as_method</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000161-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000161-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 527</span>
527:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">use_first_nonadvice_symbol_as_method</span> <span class="ruby-identifier">options</span>
528:         <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
529:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">i</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
530:             <span class="ruby-identifier">sym</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">i</span>]
531:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Symbol</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">Advice</span><span class="ruby-operator">::</span><span class="ruby-identifier">kinds</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">sym</span>)
532:               <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">:methods</span>] = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([<span class="ruby-identifier">sym</span>])
533:               <span class="ruby-ivar">@first_option_that_was_method</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">sym</span>
534:               <span class="ruby-keyword kw">return</span>
535:             <span class="ruby-keyword kw">end</span>
536:           <span class="ruby-keyword kw">end</span>
537:         <span class="ruby-keyword kw">end</span>
538:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000158" class="method-detail">
        <a name="M000158"></a>

        <div class="method-heading">
          <a href="#M000158" class="method-signature">
          <span class="method-name">validate_specification</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000158-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000158-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 483</span>
483:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validate_specification</span> 
484:         <span class="ruby-identifier">bad_options</span>(<span class="ruby-node">&quot;One of #{Advice.kinds.inspect} is required.&quot;</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">advice_kinds_given?</span>
485:         <span class="ruby-identifier">bad_options</span>(<span class="ruby-value str">&quot;:around can't be used with :before.&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">around_given_with?</span> <span class="ruby-identifier">:before</span>
486:         <span class="ruby-identifier">bad_options</span>(<span class="ruby-value str">&quot;:around can't be used with :after.&quot;</span>)  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">around_given_with?</span> <span class="ruby-identifier">:after</span>
487:         <span class="ruby-identifier">bad_options</span>(<span class="ruby-value str">&quot;:around can't be used with :after_returning.&quot;</span>)  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">around_given_with?</span> <span class="ruby-identifier">:after_returning</span>
488:         <span class="ruby-identifier">bad_options</span>(<span class="ruby-value str">&quot;:around can't be used with :after_raising.&quot;</span>)    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">around_given_with?</span> <span class="ruby-identifier">:after_raising</span>
489:         <span class="ruby-identifier">bad_options</span>(<span class="ruby-value str">&quot;:after can't be used with :after_returning.&quot;</span>)   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">after_given_with?</span> <span class="ruby-identifier">:after_returning</span>
490:         <span class="ruby-identifier">bad_options</span>(<span class="ruby-value str">&quot;:after can't be used with :after_raising.&quot;</span>)     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">after_given_with?</span> <span class="ruby-identifier">:after_raising</span>
491:         <span class="ruby-identifier">bad_options</span>(<span class="ruby-value str">&quot;:after_returning can't be used with :after_raising.&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">after_returning_given_with?</span> <span class="ruby-identifier">:after_raising</span>
492:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">some_type_or_pc_option_given?</span>
493:           <span class="ruby-identifier">bad_options</span>(<span class="ruby-value str">&quot;At least one of :pointcut(s), :type(s), :type(s)_and_ancestors, :type(s)_and_descendents, :object(s) is required.&quot;</span>) 
494:         <span class="ruby-keyword kw">end</span>
495:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pointcuts_given?</span> <span class="ruby-keyword kw">and</span> (<span class="ruby-identifier">some_type_option_given?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">objects_given?</span>)
496:           <span class="ruby-identifier">bad_options</span>(<span class="ruby-value str">&quot;Can't specify both :pointcut(s) and one or more of :type(s), and/or :object(s).&quot;</span>) 
497:         <span class="ruby-keyword kw">end</span>
498:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">noop</span>
499:           <span class="ruby-keyword kw">if</span> (<span class="ruby-keyword kw">not</span> <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">:advice</span>].<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@specification</span>[<span class="ruby-identifier">:advice</span>].<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
500:             <span class="ruby-identifier">bad_options</span> <span class="ruby-value str">&quot;You can only specify one advice object for the :advice option.&quot;</span>
501:           <span class="ruby-keyword kw">end</span>
502:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@advice</span>.<span class="ruby-identifier">nil?</span>
503:             <span class="ruby-identifier">bad_options</span> <span class="ruby-value str">&quot;No advice block nor :advice option was given.&quot;</span>
504:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@advice</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">==</span> <span class="ruby-value">-2</span>
505:             <span class="ruby-identifier">bad_options</span> <span class="ruby-value str">&quot;It appears that your advice parameter list is the obsolete format |jp, *args|. The correct format is |jp, object, *args|&quot;</span>
506:           <span class="ruby-keyword kw">end</span>
507:         <span class="ruby-keyword kw">end</span>
508:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000124" class="method-detail">
        <a name="M000124"></a>

        <div class="method-heading">
          <a href="#M000124" class="method-signature">
          <span class="method-name">warn_if_no_join_points_matched</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000124-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000124-source">
<pre>
     <span class="ruby-comment cmt"># File lib/aquarium/aspects/aspect.rb, line 221</span>
221:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">warn_if_no_join_points_matched</span>
222:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">should_warn_if_no_matching_join_points</span>
223:         <span class="ruby-ivar">@pointcuts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pc</span><span class="ruby-operator">|</span>
224:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">join_points_matched</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
225:             <span class="ruby-keyword kw">return</span>
226:           <span class="ruby-keyword kw">end</span>
227:         <span class="ruby-keyword kw">end</span>
228:         <span class="ruby-identifier">msg</span>  = <span class="ruby-node">&quot;Warning: No join points were matched. The options specified were #{@original_options.inspect}.&quot;</span>
229:         <span class="ruby-identifier">msg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; The resulting specification was #{@specification.inspect}.&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug?</span>
230:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span> <span class="ruby-identifier">msg</span>
231:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>